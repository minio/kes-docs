<aside class="scrollbar sticky top-0 w-72 flex-shrink-0 overflow-auto bg-gray-100 p-7" id="sidebar">
	<nav class="text-sm">
		<h2 class="mb-6 text-md font-bold">{{ i18n "nav_navigation" }}</h2>

		{{ $current := . }}
		{{ template "tree-nav" dict "sect" .Site.Home.Sections "current" $current }}

		{{ define "tree-nav" }}
			{{ $current := .current }}
			<ul class="mb-6">
				{{ $sortBy := (default "title" .current.Site.Params.GeekdocFileTreeSortBy | lower) }}
				{{ range .sect.GroupBy "Weight" }}
					{{ $rangeBy := .ByTitle }}

					{{ if eq $sortBy "title" }}
						{{ $rangeBy = .ByTitle }}
					{{ else if eq $sortBy "linktitle" }}
						{{ $rangeBy = .ByLinkTitle }}
					{{ else if eq $sortBy "date" }}
						/watch
						{{ $rangeBy = .ByDate }}
					{{ else if eq $sortBy "publishdate" }}
						{{ $rangeBy = .ByPublishDate }}
					{{ else if eq $sortBy "expirydate" }}
						{{ $rangeBy = .ByExpiryDate }}
					{{ else if eq $sortBy "lastmod" }}
						{{ $rangeBy = .ByLastmod }}
					{{ else if eq $sortBy "title_reverse" }}
						{{ $rangeBy = .ByTitle.Reverse }}
					{{ else if eq $sortBy "linktitle_reverse" }}
						{{ $rangeBy = .ByLinkTitle.Reverse }}
					{{ else if eq $sortBy "date_reverse" }}
						{{ $rangeBy = .ByDate.Reverse }}
					{{ else if eq $sortBy "publishdate_reverse" }}
						{{ $rangeBy = .ByPublishDate.Reverse }}
					{{ else if eq $sortBy "expirydate_reverse" }}
						{{ $rangeBy = .ByExpiryDate.Reverse }}
					{{ else if eq $sortBy "lastmod_reverse" }}
						{{ $rangeBy = .ByLastmod.Reverse }}
					{{ end }}

					{{ range $rangeBy }}
						{{ if not .Params.GeekdocHidden }}
							{{ $numberOfPages := (add (len .Pages) (len .Sections)) }}
							{{ $isParent := and (ne $numberOfPages 0) (not .Params.GeekdocFlatSection) }}
							{{ $isCurrent := eq $current . }}
							{{ $isAncestor := .IsAncestor $current }}
							{{ $id := substr (sha1 .Permalink) 0 8 }}
							{{ $doCollapse := and $isParent (or .Params.GeekdocCollapseSection (default false .Site.Params.GeekdocCollapseAllSections)) }}
							<li>
								{{ if or .Content }}
									<a
										href="{{ .RelPermalink }}"
										class="{{- if eq $current . }}
											text-theme-red font-medium
										{{ else }}
											text-muted
										{{- end }} block py-1.5 hover:text-black"
									>
										{{ partial "utils/title" . }}
									</a>
								{{ else }}
									<span class="mb-2 block border-b border-gray-200/50 pb-1 font-medium text-black">{{ partial "utils/title" . }}</span>
								{{ end }}
								{{ if $doCollapse }}
									<svg class="gdoc-icon toggle gdoc_keyboard_arrow_left">
										<use xlink:href="#gdoc_keyboard_arrow_left"></use>
									</svg>
									<svg class="gdoc-icon toggle gdoc_keyboard_arrow_down">
										<use xlink:href="#gdoc_keyboard_arrow_down"></use>
									</svg>
								{{ end }}

								{{ if $isParent }}
									{{ template "tree-nav" dict "sect" .Pages "current" $current }}
								{{ end }}
							</li>
						{{ end }}
					{{ end }}
				{{ end }}
			</ul>
		{{ end }}
	</nav>
</aside>
